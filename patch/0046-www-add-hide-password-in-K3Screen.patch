From 2d8b8517bde6dc5fc079b5ed9551fd0dd66247c5 Mon Sep 17 00:00:00 2001
From: Rokis <ghost1988102@gmail.com>
Date: Sun, 7 Jun 2020 23:05:29 +0800
Subject: [PATCH 046/122] www: add "hide password" in K3Screen.      update
 some hints of Screen.

Signed-off-by: Rokis <ghost1988102@gmail.com>
---
 release/src/router/shared/defaults.c      |  2 ++
 release/src/router/www/CN.dict            |  5 ++++-
 release/src/router/www/EN.dict            |  5 ++++-
 release/src/router/www/TW.dict            |  5 ++++-
 release/src/router/www/Tools_K3Screen.asp | 21 ++++++++++++++++++++-
 5 files changed, 34 insertions(+), 4 deletions(-)

diff --git a/release/src/router/shared/defaults.c b/release/src/router/shared/defaults.c
index 7225b9e08c..6336ce0af0 100644
--- a/release/src/router/shared/defaults.c
+++ b/release/src/router/shared/defaults.c
@@ -4263,6 +4263,8 @@ struct nvram_tuple router_defaults[] = {
 	{ "weather_city", "", CKN_STR20, CKN_TYPE_DEFAULT, CKN_ACC_LEVEL_DEFAULT, CKN_ENC_DEFAULT, 0 },
 	{ "weather_interval", "14400", CKN_STR5, CKN_TYPE_DEFAULT, CKN_ACC_LEVEL_DEFAULT, CKN_ENC_DEFAULT, 0 },
 	{ "screen_timeout", "30", CKN_STR3, CKN_TYPE_DEFAULT, CKN_ACC_LEVEL_DEFAULT, CKN_ENC_DEFAULT, 0 },
+	{ "screen_hidepwd", "0", CKN_STR1, CKN_TYPE_DEFAULT, CKN_ACC_LEVEL_DEFAULT, CKN_ENC_DEFAULT, 0 },
+	{ "screen_hidepwd_visitor", "0", CKN_STR1, CKN_TYPE_DEFAULT, CKN_ACC_LEVEL_DEFAULT, CKN_ENC_DEFAULT, 0 },
 #endif
 /* End of K3-specific settings */
 
diff --git a/release/src/router/www/CN.dict b/release/src/router/www/CN.dict
index 5229145712..9139c7dece 100644
--- a/release/src/router/www/CN.dict
+++ b/release/src/router/www/CN.dict
@@ -4075,10 +4075,13 @@ dhcpd_send_return=DHCPD: 发送空WPAD并附带回车
 K3Screen=屏幕
 tools_screen_desc=设置路由器的屏幕。
 weather_key=天气API密钥
-weather_key_hint=免费在www.seniverse.com注册心知天气帐号，获取API密钥。
+weather_key_hint=免费在<a style="text-decoration: underline;color:#FC0;" href="https://www.seniverse.com" target="_blank">www.seniverse.com</a>注册心知天气帐号，获取API私钥。
 weather_city=城市
+weather_note=留空则按IP地址定位
 weather_interval=更新间隔
 screen_timeout=屏幕超时(秒)
+screen_hidepwd=隐藏无线密码
+screen_hidepwd_visitor=隐藏访客密码
 weather_off=关闭
 weather_1h=1小时
 weather_2h=2小时
diff --git a/release/src/router/www/EN.dict b/release/src/router/www/EN.dict
index e590153393..41c21b2750 100644
--- a/release/src/router/www/EN.dict
+++ b/release/src/router/www/EN.dict
@@ -4075,10 +4075,13 @@ dhcpd_send_return=dhcpd: send empty WPAD with a carriage return
 K3Screen=Screen
 tools_screen_desc=Configures the screen of router.
 weather_key=Weather API key
-weather_key_hint=Free signup and get API key from www.seniverse.com
+weather_key_hint=Free signup and get API private key from <a style="text-decoration: underline;color:#FC0;" href="https://www.seniverse.com" target="_blank">www.seniverse.com</a>
 weather_city=City
+weather_note=empty=ip
 weather_interval=Update interval
 screen_timeout=Screen timeout(sec)
+screen_hidepwd=Hide WiFi Password
+screen_hidepwd_visitor=Hide Vistor Password
 weather_off=OFF
 weather_1h=1 hour
 weather_2h=2 hours
diff --git a/release/src/router/www/TW.dict b/release/src/router/www/TW.dict
index bf9dc3174a..d51adb55aa 100644
--- a/release/src/router/www/TW.dict
+++ b/release/src/router/www/TW.dict
@@ -4075,10 +4075,13 @@ dhcpd_send_return=DHCPD: 發送空WPAD並附帶回車
 K3Screen=屏幕
 tools_screen_desc=設置路由器的屏幕。
 weather_key=天氣API密鑰
-weather_key_hint=免費在www.seniverse.com註冊心知天氣帳號，獲取API密鑰。
+weather_key_hint=免費在<a style="text-decoration: underline;color:#FC0;" href="https://www.seniverse.com" target="_blank">www.seniverse.com</a>註冊心知天氣帳號，獲取API私鑰。
 weather_city=城市
+weather_note=留空則按IP地址定位
 weather_interval=更新間隔
 screen_timeout=屏幕超時(秒)
+screen_hidepwd=隱藏无線密碼
+screen_hidepwd_visitor=隱藏訪客密碼
 weather_off=關閉
 weather_1h=1小時
 weather_2h=2小時
diff --git a/release/src/router/www/Tools_K3Screen.asp b/release/src/router/www/Tools_K3Screen.asp
index 8a7122210c..bfeedd282d 100644
--- a/release/src/router/www/Tools_K3Screen.asp
+++ b/release/src/router/www/Tools_K3Screen.asp
@@ -90,7 +90,10 @@ function initial(){
 
         <tr>
           <th><#weather_city#></th>
-          <td><input type="text" maxlength="16" class="input_20_table" name="weather_city" value="<% nvram_get("weather_city"); %>" autocorrect="off" autocapitalize="off"></td>
+			<td>
+		      <input type="text" maxlength="16" class="input_20_table" name="weather_city" value="<% nvram_get("weather_city"); %>" autocorrect="off" autocapitalize="off">
+		      <span><#weather_note#></span>
+			</td>
         </tr>
 
         <tr>
@@ -108,6 +111,22 @@ function initial(){
           </td>
         </tr>
 
+        <tr id="hidepwd_tr">
+          <th><#screen_hidepwd#></th>
+			<td>
+				<input type="radio" name="screen_hidepwd" class="input" value="1" <% nvram_match_x("", "screen_hidepwd", "1", "checked"); %>><#checkbox_Yes#>
+				<input type="radio" name="screen_hidepwd" class="input" value="0" <% nvram_match_x("", "screen_hidepwd", "0", "checked"); %>><#checkbox_No#>
+			</td>
+        </tr>
+
+        <tr id="hidepwd_visitor_tr">
+          <th><#screen_hidepwd_visitor#></th>
+			<td>
+				<input type="radio" name="screen_hidepwd_visitor" class="input" value="1" <% nvram_match_x("", "screen_hidepwd_visitor", "1", "checked"); %>><#checkbox_Yes#>
+				<input type="radio" name="screen_hidepwd_visitor" class="input" value="0" <% nvram_match_x("", "screen_hidepwd_visitor", "0", "checked"); %>><#checkbox_No#>
+			</td>
+        </tr>
+
         <tr>
           <th><#screen_timeout#></th>
           <td>
-- 
2.25.1

