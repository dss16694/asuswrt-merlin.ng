From 7c664602098c1a7a57d327d076abb696323472b5 Mon Sep 17 00:00:00 2001
From: Rokis <ghost1988102@gmail.com>
Date: Thu, 30 Apr 2020 20:25:50 +0800
Subject: [PATCH 014/122] www: add web Tools_K3Screen to config screen

Signed-off-by: Rokis <ghost1988102@gmail.com>
---
 release/src/router/httpd/web.c                |   8 +
 release/src/router/shared/defaults.c          |   9 ++
 release/src/router/www/CN.dict                |  14 ++
 release/src/router/www/EN.dict                |  14 ++
 release/src/router/www/TW.dict                |  14 ++
 release/src/router/www/Tools_K3Screen.asp     | 145 ++++++++++++++++++
 .../menuTree_bwdpi_traffic_analyzer.js        |  91 +++++------
 .../require/menuTrees/menuTree_no_bwdpi.js    |  77 +++++-----
 .../router/www/require/modules/menuTree.js    |  95 ++++++------
 9 files changed, 337 insertions(+), 130 deletions(-)
 create mode 100644 release/src/router/www/Tools_K3Screen.asp

diff --git a/release/src/router/httpd/web.c b/release/src/router/httpd/web.c
index 6e03d0b44b..4e97205999 100644
--- a/release/src/router/httpd/web.c
+++ b/release/src/router/httpd/web.c
@@ -5069,6 +5069,14 @@ static int ej_update_variables(int eid, webs_t wp, int argc, char_t **argv)
 				else
 					strlcpy(notify_cmd, action_script, sizeof(notify_cmd));
 
+#if defined(RTK3)
+				if(strstr(action_script,"restart_screen"))
+				{
+					notify_cmd[0] = '\0';
+					doSystem("k3screen");
+				}
+#endif
+
 				if(strcmp(action_script, "saveNvram"))
 				{
 #ifdef RTCONFIG_CFGSYNC
diff --git a/release/src/router/shared/defaults.c b/release/src/router/shared/defaults.c
index 159760e0ca..9c68f5dcbf 100644
--- a/release/src/router/shared/defaults.c
+++ b/release/src/router/shared/defaults.c
@@ -4255,6 +4255,15 @@ struct nvram_tuple router_defaults[] = {
 
 /* End of Merlin-specific settings */
 
+/* K3-specific settings */
+#ifdef RTK3
+	{ "weather_key", "", CKN_STR32, CKN_TYPE_DEFAULT, CKN_ACC_LEVEL_DEFAULT, CKN_ENC_DEFAULT, 0 },
+	{ "weather_city", "", CKN_STR20, CKN_TYPE_DEFAULT, CKN_ACC_LEVEL_DEFAULT, CKN_ENC_DEFAULT, 0 },
+	{ "weather_interval", "14400", CKN_STR5, CKN_TYPE_DEFAULT, CKN_ACC_LEVEL_DEFAULT, CKN_ENC_DEFAULT, 0 },
+	{ "screen_timeout", "30", CKN_STR3, CKN_TYPE_DEFAULT, CKN_ACC_LEVEL_DEFAULT, CKN_ENC_DEFAULT, 0 },
+#endif
+/* End of K3-specific settings */
+
 	{ "aae_disable_force", "0", CKN_STR1, CKN_TYPE_DEFAULT, CKN_ACC_LEVEL_DEFAULT, CKN_ENC_DEFAULT, 0 },
 
 	{ 0, 0, 0, 0, 0, 0, 0 }
diff --git a/release/src/router/www/CN.dict b/release/src/router/www/CN.dict
index 32a9d899a9..eee84212e0 100644
--- a/release/src/router/www/CN.dict
+++ b/release/src/router/www/CN.dict
@@ -4069,3 +4069,17 @@ Firewall_Drop_broadcasts=防火墙: 丢弃IPv6邻居请求广播
 Wan_Use_local=Wan: 使用本地缓存DNS服务器作为系统解析器
 Disable_Asusnat_tunnel=禁用Asusnat隧道
 dhcpd_send_return=DHCPD: 发送空WPAD并附带回车
+K3Screen=屏幕
+tools_screen_desc=设置路由器的屏幕。
+weather_key=天气API密钥
+weather_key_hint=免费在www.seniverse.com注册心知天气帐号，获取API密钥。
+weather_city=城市
+weather_interval=更新间隔
+screen_timeout=屏幕超时(秒)
+weather_off=关闭
+weather_1h=1小时
+weather_2h=2小时
+weather_4h=4小时
+weather_6h=6小时
+weather_12h=12小时
+weather_24h=24小时
diff --git a/release/src/router/www/EN.dict b/release/src/router/www/EN.dict
index 790697fb84..ccc9354cad 100644
--- a/release/src/router/www/EN.dict
+++ b/release/src/router/www/EN.dict
@@ -4069,3 +4069,17 @@ Firewall_Drop_broadcasts=Firewall: Drop IPv6 neighbour solicitation broadcasts
 Wan_Use_local=Wan: Use local caching DNS server as system resolver
 Disable_Asusnat_tunnel=Disable Asusnat tunnel
 dhcpd_send_return=dhcpd: send empty WPAD with a carriage return
+K3Screen=Screen
+tools_screen_desc=Configures the screen of router.
+weather_key=Weather API key
+weather_key_hint=Free signup and get API key from www.seniverse.com
+weather_city=City
+weather_interval=Update interval
+screen_timeout=Screen timeout(sec)
+weather_off=OFF
+weather_1h=1 hour
+weather_2h=2 hours
+weather_4h=4 hours
+weather_6h=6 hours
+weather_12h=12 hours
+weather_24h=24 hours
diff --git a/release/src/router/www/TW.dict b/release/src/router/www/TW.dict
index 63967e0afe..a340791b62 100644
--- a/release/src/router/www/TW.dict
+++ b/release/src/router/www/TW.dict
@@ -4069,3 +4069,17 @@ Firewall_Drop_broadcasts=防火墻: 丟棄IPv6鄰居請求廣播
 Wan_Use_local=Wan: 使用本地緩存DNS服務器作為系統解析器
 Disable_Asusnat_tunnel=禁用Asusnat隧道
 dhcpd_send_return=DHCPD: 發送空WPAD並附帶回車
+K3Screen=屏幕
+tools_screen_desc=設置路由器的屏幕。
+weather_key=天氣API密鑰
+weather_key_hint=免費在www.seniverse.com註冊心知天氣帳號，獲取API密鑰。
+weather_city=城市
+weather_interval=更新間隔
+screen_timeout=屏幕超時(秒)
+weather_off=關閉
+weather_1h=1小時
+weather_2h=2小時
+weather_4h=4小時
+weather_6h=6小時
+weather_12h=12小時
+weather_24h=24小時
diff --git a/release/src/router/www/Tools_K3Screen.asp b/release/src/router/www/Tools_K3Screen.asp
new file mode 100644
index 0000000000..8a7122210c
--- /dev/null
+++ b/release/src/router/www/Tools_K3Screen.asp
@@ -0,0 +1,145 @@
+﻿<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml">
+<html xmlns:v>
+<head>
+<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
+<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
+<meta HTTP-EQUIV="Pragma" CONTENT="no-cache">
+<meta HTTP-EQUIV="Expires" CONTENT="-1">
+<link rel="shortcut icon" href="images/favicon.png">
+<link rel="icon" href="images/favicon.png">
+<title><#Web_Title#> - <#K3Screen#></title>
+<link rel="stylesheet" type="text/css" href="index_style.css">
+<link rel="stylesheet" type="text/css" href="form_style.css">
+<script language="JavaScript" type="text/javascript" src="/state.js"></script>
+<script language="JavaScript" type="text/javascript" src="/general.js"></script>
+<script language="JavaScript" type="text/javascript" src="/validator.js"></script>
+<script language="JavaScript" type="text/javascript" src="/popup.js"></script>
+<script language="JavaScript" type="text/javascript" src="/help.js"></script>
+<script>
+
+function applyRule(){
+	showLoading();
+	document.form.submit();
+}
+
+function done_validating(action){
+	refreshpage();
+}
+
+function initial(){
+	show_menu();
+}
+
+</script>
+</head>
+<body onload="initial();" onunLoad="return unload_body();">
+
+<div id="TopBanner"></div>
+
+<div id="Loading" class="popup_bg"></div>
+
+<iframe name="hidden_frame" id="hidden_frame" src="" width="0" height="0" frameborder="0"></iframe>
+<form method="post" name="form" id="ruleForm" action="/start_apply.htm" target="hidden_frame">
+<input type="hidden" name="productid" value="<% nvram_get("productid"); %>">
+
+<input type="hidden" name="current_page" value="Tools_K3Screen.asp">
+<input type="hidden" name="next_page" value="">
+<input type="hidden" name="next_host" value="">
+<input type="hidden" name="group_id" value="">
+<input type="hidden" name="modified" value="0">
+<input type="hidden" name="action_mode" value="apply_new">
+<input type="hidden" name="action_wait" value="2">
+<input type="hidden" name="action_script" value="restart_screen">
+<input type="hidden" name="first_time" value="">
+<input type="hidden" name="preferred_lang" id="preferred_lang" value="<% nvram_get("preferred_lang"); %>">
+<input type="hidden" name="firmver" value="<% nvram_get("firmver"); %>">
+
+<table class="content" align="center" cellpadding="0" cellspacing="0">
+	<tr>
+		<td width="17">&nbsp;</td>
+		<td valign="top" width="202">
+		<div  id="mainMenu"></div>
+		<div  id="subMenu"></div>
+		</td>
+
+    <td valign="top">
+	<div id="tabMenu" class="submenuBlock"></div>
+		<!--===================================Beginning of Main Content===========================================-->
+<table width="98%" border="0" align="left" cellpadding="0" cellspacing="0">
+	<tr>
+		<td valign="top" >
+
+<table width="760px" border="0" cellpadding="4" cellspacing="0" class="FormTitle" id="FormTitle">
+	<tbody>
+	<tr>
+		  <td bgcolor="#4D595D" valign="top">
+		  <div>&nbsp;</div>
+		  <div class="formfonttitle"><#Tools#> - <#K3Screen#></div>
+		  <div style="margin:10px 0 10px 5px;" class="splitLine"></div>
+		  <div class="formfontdesc"><#tools_screen_desc#></div>
+
+	<table width="100%" border="1" align="center" cellpadding="4" cellspacing="0" bordercolor="#6b8fa3"  class="FormTable">
+        <tr>
+          <th><#weather_key#></th>
+          <td>
+			<input type="text" maxlength="32" class="input_32_table" name="weather_key" value="<% nvram_get("weather_key"); %>" autocorrect="off" autocapitalize="off">
+			<div class="formfontdesc" style="color:#FFCC00;margin-top:5px;"><#weather_key_hint#></div>
+          </td>
+        </tr>
+
+        <tr>
+          <th><#weather_city#></th>
+          <td><input type="text" maxlength="16" class="input_20_table" name="weather_city" value="<% nvram_get("weather_city"); %>" autocorrect="off" autocapitalize="off"></td>
+        </tr>
+
+        <tr>
+          <th><#weather_interval#></th>
+          <td>
+			<select name="weather_interval" class="input_option" >
+				<option value="0" <% nvram_match("weather_interval", "0","selected"); %>><#weather_off#></option>
+				<option value="3600" <% nvram_match("weather_interval", "3600","selected"); %>><#weather_1h#></option>
+				<option value="7200" <% nvram_match("weather_interval", "7200","selected"); %>><#weather_2h#></option>
+				<option value="14400" <% nvram_match("weather_interval", "14400","selected"); %>><#weather_4h#></option>
+				<option value="21600" <% nvram_match("weather_interval", "21600","selected"); %>><#weather_6h#></option>
+				<option value="43200" <% nvram_match("weather_interval", "43200","selected"); %>><#weather_12h#></option>
+				<option value="86400" <% nvram_match("weather_interval", "86400","selected"); %>><#weather_24h#></option>
+			</select>
+          </td>
+        </tr>
+
+        <tr>
+          <th><#screen_timeout#></th>
+          <td>
+		      <input type="text" maxlength="3" class="input_6_table" name="screen_timeout" onKeyPress="return validator.isNumber(this,event);" value="<% nvram_get("screen_timeout"); %>">
+		      <span><#FW_note#> 0 - <#btn_Disabled#></span>
+		  </td>
+        </tr>
+
+	</table>
+            <div class="apply_gen">
+				<input name="button" type="button" class="button_gen" onclick="applyRule()" value="<#CTL_apply#>"/>
+            </div>
+
+		</td>
+	</tr>
+
+	</tbody>
+
+</table>
+	</td>
+	</form>
+
+        </tr>
+      </table>
+		<!--===================================Ending of Main Content===========================================-->
+	</td>
+
+    <td width="10" align="center" valign="top">&nbsp;</td>
+	</tr>
+</table>
+
+<div id="footer"></div>
+
+</body>
+</html>
diff --git a/release/src/router/www/require/menuTrees/menuTree_bwdpi_traffic_analyzer.js b/release/src/router/www/require/menuTrees/menuTree_bwdpi_traffic_analyzer.js
index 134543b5af..182bc83fc5 100644
--- a/release/src/router/www/require/menuTrees/menuTree_bwdpi_traffic_analyzer.js
+++ b/release/src/router/www/require/menuTrees/menuTree_bwdpi_traffic_analyzer.js
@@ -8,9 +8,9 @@ define(function(){
 				index: "Assign an index to this menu, it is also used for filtering",
 				tab: [
 					{
-						url: "Put url here", 
+						url: "Put url here",
 						tabName: "
-								Assign a title for this tab, leave this field empty to bypass this tab, 
+								Assign a title for this tab, leave this field empty to bypass this tab,
 								fill in '__HIDE__' to hide the tab switcher,
 								fill in '__INHERIT__' to inhert tab index from referred page.
 						"
@@ -20,19 +20,19 @@ define(function(){
 			*/
 			{
 				menuName: "<#QIS#>",
-				index: "menu_QIS", 
+				index: "menu_QIS",
 				tab: [
 					{url: "QIS_wizard.htm", tabName: "__HIDE__"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			/* ============================================================================================================ */
 			{
 				menuName: "<#menu5_1_1#>",
-				index: "menu_Split", 
+				index: "menu_Split",
 				tab: [
 					{url: "NULL", tabName: "__HIDE__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu1#>",
@@ -41,7 +41,7 @@ define(function(){
 					{url: "<% networkmap_page(); %>", tabName: "__HIDE__"},
 					{url: "NULL", tabName: "__INHERIT__"}
 				]
-			}, 
+			},
 			{
 				menuName: "AiMesh",
 				index: "menu_AiMesh", 
@@ -63,7 +63,7 @@ define(function(){
 			},
 			{
 				menuName: "<#AiProtection_title#>",
-				index: "menu_AiProtection", 
+				index: "menu_AiProtection",
 				tab: [
 					{url: "AiProtection_HomeSecurity.asp", tabName: "__HIDE__"},
 					{url: "AiProtection_HomeProtection.asp", tabName: "<#AiProtection_Home#>"},
@@ -76,41 +76,41 @@ define(function(){
 					{url: "AiProtection_Key_Guard.asp", tabName: "Key Guard"},
 					{url: "YandexDNS.asp", tabName: "<#YandexDNS#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{		//for without bwdpi model, RT-N66U_C1
 				menuName: "<#Menu_TrafficManager#>",
-				index: "menu_QoS", 
+				index: "menu_QoS",
 				tab: [
 					{url: "QoS_EZQoS.asp", tabName: "<#menu5_3_2#>"},
 					{url: "Main_TrafficMonitor_realtime.asp", tabName: "<#traffic_monitor#>"},
 					{url: "Main_TrafficMonitor_last24.asp", tabName: "__INHERIT__"},
 					{url: "Main_TrafficMonitor_daily.asp", tabName: "__INHERIT__"},
-					{url: "AdaptiveQoS_ROG.asp", tabName: "<table style='margin-top:-7px;'><tr><td><img src='/images/ROG_Logo.png' style='border:0px;width:32px;'></td><td>ROG First</td></tr></table>"}, 
+					{url: "AdaptiveQoS_ROG.asp", tabName: "<table style='margin-top:-7px;'><tr><td><img src='/images/ROG_Logo.png' style='border:0px;width:32px;'></td><td>ROG First</td></tr></table>"},
 					{url: "Main_Spectrum_Content.asp", tabName: "<#Spectrum_title#>"},
 					{url: "AdaptiveQoS_TrafficLimiter.asp", tabName: "Traffic Limiter"},
 					{url: "Advanced_QOSUserPrio_Content.asp", tabName: "__INHERIT__"},
 					{url: "Advanced_QOSUserRules_Content.asp", tabName: "__INHERIT__"},
-				] 
+				]
 			},
 			{		//for without bwdpi model, RT-N66U_C1
 				menuName: "<#Parental_Control#>",
-				index: "menu_ParentalControl", 
+				index: "menu_ParentalControl",
 				tab: [
 					{url: "ParentalControl.asp", tabName: "<#Parental_Control#>"},
 					{url: "YandexDNS.asp", tabName: "<#YandexDNS#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#Adaptive_QoS#>",
-				index: "menu_BandwidthMonitor", 
+				index: "menu_BandwidthMonitor",
 				tab: [
 					{url: "AdaptiveQoS_Bandwidth_Monitor.asp", tabName: "<#Bandwidth_monitor#>"},
 					{url: "QoS_EZQoS.asp", tabName: "<#menu5_3_2#>"},
 					{url: "QoS_Stats.asp", tabName: "Classification"},
 					{url: "AdaptiveQoS_WebHistory.asp", tabName: "<#Adaptive_History#>"},
-					{url: "AdaptiveQoS_ROG.asp", tabName: "<table style='margin-top:-7px;'><tr><td><img src='/images/ROG_Logo.png' style='border:0px;width:32px;'></td><td>ROG First</td></tr></table>"}, 
+					{url: "AdaptiveQoS_ROG.asp", tabName: "<table style='margin-top:-7px;'><tr><td><img src='/images/ROG_Logo.png' style='border:0px;width:32px;'></td><td>ROG First</td></tr></table>"},
 					{url: "Main_Spectrum_Content.asp", tabName: "<#Spectrum_title#>"},
 					{url: "Advanced_QOSUserPrio_Content.asp", tabName: "__INHERIT__"},
 					{url: "Advanced_QOSUserRules_Content.asp", tabName: "__INHERIT__"},
@@ -125,11 +125,11 @@ define(function(){
 				tab: [
 					{url: "UUAccelerator.asp", tabName: "网易UU加速器"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#Traffic_Analyzer#>",
-				index: "menu_TrafficAnalyzer", 
+				index: "menu_TrafficAnalyzer",
 				tab: [
 					{url: "Main_TrafficMonitor_realtime.asp", tabName: "<#traffic_monitor#>"},
 					{url: "Main_TrafficMonitor_last24.asp", tabName: "__INHERIT__"},
@@ -141,15 +141,15 @@ define(function(){
 					{url: "TrafficAnalyzer_Statistic.asp", tabName: "<#Statistic#>"},
 					{url: "AdaptiveQoS_TrafficLimiter.asp", tabName: "Traffic Limiter"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#Game_Boost#>",
-				index: "menu_GameBoost", 
+				index: "menu_GameBoost",
 				tab: [
 					{url: "GameBoost.asp", tabName: "<#Game_Boost#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "Open NAT",
@@ -169,7 +169,7 @@ define(function(){
 			},
 			{
 				menuName: "<#Menu_usb_application#>",
-				index: "menu_APP", 
+				index: "menu_APP",
 				tab: [
 					{url: "APP_Installation.asp", tabName: "__HIDE__"},
 					{url: "aidisk.asp", tabName: "__INHERIT__"},
@@ -182,11 +182,11 @@ define(function(){
 					{url: "Advanced_TimeMachine.asp", tabName: "__INHERIT__"},
 					{url: "fileflex.asp", tabName: "__INHERIT__"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#AiCloud_Title#>",
-				index: "menu_AiCloud", 
+				index: "menu_AiCloud",
 				tab: [
 					{url: "cloud_main.asp", tabName: "AiCloud 2.0"},
 					{url: "cloud_sync.asp", tabName: "<#smart_sync#>"},
@@ -194,7 +194,7 @@ define(function(){
 					{url: "cloud_settings.asp", tabName: "<#Settings#>"},
 					{url: "cloud_syslog.asp", tabName: "<#Log#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#Tools#>",
@@ -202,8 +202,9 @@ define(function(){
 				tab: [
 					{url: "Tools_Sysinfo.asp", tabName: "<#Sysinfo#>"},
 					{url: "Tools_OtherSettings.asp", tabName: "<#Other_Settings#>"},
+					{url: "Tools_K3Screen.asp", tabName: "<#K3Screen#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			/* ============================================================================================================ */
 			{
@@ -211,7 +212,7 @@ define(function(){
 				index: "menu_Split",
 				tab: [
 					{url: "NULL", tabName: "__HIDE__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu5_1#>",
@@ -228,7 +229,7 @@ define(function(){
 					{url: "Advanced_Wireless_Survey.asp", tabName: "Site Survey"},
 					{url: "WiFi_Insight.asp", tabName: "<#WiFi_radar#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu5_2#>",
@@ -242,7 +243,7 @@ define(function(){
 					{url: "Advanced_IPTV_Content.asp", tabName: "IPTV"},
 					{url: "Advanced_SwitchCtrl_Content.asp", tabName: "<#Switch_itemname#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu5_3#>",
@@ -282,7 +283,7 @@ define(function(){
 			},
 			{
 				menuName: "VPN",
-				index: "menu_VPN", 
+				index: "menu_VPN",
 				tab: [
 					{url: "Advanced_VPNStatus.asp", tabName: "VPN Status"},
 					{url: "Advanced_VPN_OpenVPN.asp", tabName: "<#BOP_isp_heart_item#>"},
@@ -294,7 +295,7 @@ define(function(){
 					{url: "Advanced_Instant_Guard.asp", tabName: "Instant Guard"},/*untranslated*/
 					{url: "NULL", tabName: "__INHERIT__"}
 				]
-			},		
+			},
 			{
 				menuName: "<#menu5_5#>",
 				index: "menu_Firewall",
@@ -302,7 +303,7 @@ define(function(){
 					{url: "Advanced_BasicFirewall_Content.asp", tabName: "<#menu5_1_1#>"},
 					{url: "Advanced_URLFilter_Content.asp", tabName: "<#menu5_5_2#>"},
 					{url: "Advanced_KeywordFilter_Content.asp", tabName: "<#menu5_5_5#>"},
-					{url: "Advanced_Firewall_Content.asp", tabName: "<#menu5_5_4#>"},		
+					{url: "Advanced_Firewall_Content.asp", tabName: "<#menu5_5_4#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
 				]
 			},
@@ -413,7 +414,7 @@ define(function(){
 				if(!networkTool_support){
 					retArray.push("menu_NekworkTool");
 				}
-				
+
 				if(!pptpd_support && !openvpnd_support && !vpnc_support){
 					retArray.push("menu_VPN");
 				}
@@ -591,30 +592,30 @@ define(function(){
 				}
 
 				if(!traffic_analyzer_support){
-					retArray.push("TrafficAnalyzer_Statistic.asp");		
+					retArray.push("TrafficAnalyzer_Statistic.asp");
 				}
 
 				if(!traffic_limiter_support){
-					retArray.push("AdaptiveQoS_TrafficLimiter.asp");		
+					retArray.push("AdaptiveQoS_TrafficLimiter.asp");
 				}
 
 				if(downsize_4m_support){
 					retArray.push("Main_ConnStatus_Content.asp");
 					retArray.push("Main_TrafficMonitor_realtime.asp");
 				}
-				
+
 				if(!pptpd_support){
 					retArray.push("Advanced_VPN_PPTP.asp");
 				}
 
 				if(!openvpnd_support){
 					retArray.push("Advanced_VPN_OpenVPN.asp");
-				}	
+				}
 
 				if(!ipsec_srv_support){
 					retArray.push("Advanced_VPN_IPSec.asp");
 				}
-				
+
 				if(!vpnc_support){
 					retArray.push("Advanced_VPNClient_Content.asp");
 				}
@@ -638,7 +639,7 @@ define(function(){
 				if(noftp_support){
 					retArray.push("Advanced_AiDisk_ftp.asp");
 				}
-				
+
 				if(!dualWAN_support){
 					retArray.push("Advanced_WANPort_Content.asp");
 					retArray.push("Advanced_Modem_Content.asp");
@@ -663,7 +664,7 @@ define(function(){
 				}
 
 				if(!SwitchCtrl_support){
-					retArray.push("Advanced_SwitchCtrl_Content.asp");		
+					retArray.push("Advanced_SwitchCtrl_Content.asp");
 				}
 
 				if(!tr069_support){
@@ -685,7 +686,7 @@ define(function(){
 				if(!smart_connect_support || Qcawifi_support){
 					retArray.push("Advanced_Smart_Connect.asp");
 				}
-				
+
 				if(!adBlock_support){
 					retArray.push("AiProtection_AdBlock.asp");
 				}
@@ -704,10 +705,10 @@ define(function(){
 					retArray.push("Main_AdslStatus_Content.asp");
 					retArray.push("Main_Spectrum_Content.asp");
 				}
-				else{					
+				else{
 					retArray.push("Advanced_WAN_Content.asp");
 					retArray.push("Advanced_VDSL_Content.asp");
-					retArray.push("Advanced_OperationMode_Content.asp");					
+					retArray.push("Advanced_OperationMode_Content.asp");
 					if(!spectrum_support)
 						retArray.push("Main_Spectrum_Content.asp");
 				}
@@ -762,7 +763,7 @@ define(function(){
 				if((!Rawifi_support && ! Rtkwifi_support) || !concurrep_support || !isSwMode("re")){
 					retArray.push("Advanced_WProxy_Content.asp");
 				}
-				
+
 				if(!captivePortal_support) {
 					retArray.push("Captive_Portal.asp");
 					retArray.push("Captive_Portal_Advanced.asp");
@@ -820,7 +821,7 @@ define(function(){
 				}
 				else if(isSwMode("ap")){
 					retArray.push("GameBoost.asp");
-					retArray.push("TrafficAnalyzer_Statistic.asp");	
+					retArray.push("TrafficAnalyzer_Statistic.asp");
 					if(!dhcp_override_support){
 						retArray.push("Advanced_DHCP_Content.asp");
 					}
diff --git a/release/src/router/www/require/menuTrees/menuTree_no_bwdpi.js b/release/src/router/www/require/menuTrees/menuTree_no_bwdpi.js
index 4a01e8b4ae..bc749d382e 100644
--- a/release/src/router/www/require/menuTrees/menuTree_no_bwdpi.js
+++ b/release/src/router/www/require/menuTrees/menuTree_no_bwdpi.js
@@ -8,9 +8,9 @@ define(function(){
 				index: "Assign an index to this menu, it is also used for filtering",
 				tab: [
 					{
-						url: "Put url here", 
+						url: "Put url here",
 						tabName: "
-								Assign a title for this tab, leave this field empty to bypass this tab, 
+								Assign a title for this tab, leave this field empty to bypass this tab,
 								fill in '__HIDE__' to hide the tab switcher,
 								fill in '__INHERIT__' to inhert tab index from referred page.
 						"
@@ -20,19 +20,19 @@ define(function(){
 			*/
 			{
 				menuName: "<#QIS#>",
-				index: "menu_QIS", 
+				index: "menu_QIS",
 				tab: [
 					{url: "QIS_wizard.htm", tabName: "__HIDE__"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			/* ============================================================================================================ */
 			{
 				menuName: "<#menu5_1_1#>",
-				index: "menu_Split", 
+				index: "menu_Split",
 				tab: [
 					{url: "NULL", tabName: "__HIDE__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu1#>",
@@ -41,7 +41,7 @@ define(function(){
 					{url: "<% networkmap_page(); %>", tabName: "__HIDE__"},
 					{url: "NULL", tabName: "__INHERIT__"}
 				]
-			}, 
+			},
 			{
 				menuName: "AiMesh",
 				index: "menu_AiMesh", 
@@ -63,7 +63,7 @@ define(function(){
 			},
 			{
 				menuName: "<#Menu_TrafficManager#>",
-				index: "menu_QoS", 
+				index: "menu_QoS",
 				tab: [
 					{url: "QoS_EZQoS.asp", tabName: "<#menu5_3_2#>"},
 					{url: "QoS_Stats.asp", tabName: "QoS Statistics"},
@@ -74,12 +74,12 @@ define(function(){
 					{url: "Main_TrafficMonitor_devrealtime.asp", tabName: "__INHERIT__"},
 					{url: "Main_TrafficMonitor_devdaily.asp", tabName: "__INHERIT__"},
 					{url: "Main_TrafficMonitor_devmonthly.asp", tabName: "__INHERIT__"},
-					{url: "AdaptiveQoS_ROG.asp", tabName: "<table style='margin-top:-7px;'><tr><td><img src='/images/ROG_Logo.png' style='border:0px;width:32px;'></td><td>ROG First</td></tr></table>"}, 
+					{url: "AdaptiveQoS_ROG.asp", tabName: "<table style='margin-top:-7px;'><tr><td><img src='/images/ROG_Logo.png' style='border:0px;width:32px;'></td><td>ROG First</td></tr></table>"},
 					{url: "Main_Spectrum_Content.asp", tabName: "<#Spectrum_title#>"},
 					{url: "AdaptiveQoS_TrafficLimiter.asp", tabName: "Traffic Limiter"},
 					{url: "Advanced_QOSUserPrio_Content.asp", tabName: "__INHERIT__"},
 					{url: "Advanced_QOSUserRules_Content.asp", tabName: "__INHERIT__"},
-				] 
+				]
 			},
 			{
 				menuName: "网易UU加速器",
@@ -91,20 +91,20 @@ define(function(){
 			},
 			{
 				menuName: "<#Parental_Control#>",
-				index: "menu_ParentalControl", 
+				index: "menu_ParentalControl",
 				tab: [
 					{url: "ParentalControl.asp", tabName: "<#Parental_Control#>"},
 					{url: "YandexDNS.asp", tabName: "<#YandexDNS#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#Game_Boost#>",
-				index: "menu_GameBoost", 
+				index: "menu_GameBoost",
 				tab: [
 					{url: "GameBoost.asp", tabName: "<#Game_Boost#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "腾讯网游加速器",
@@ -116,7 +116,7 @@ define(function(){
 			},
 			{
 				menuName: "<#Menu_usb_application#>",
-				index: "menu_APP", 
+				index: "menu_APP",
 				tab: [
 					{url: "APP_Installation.asp", tabName: "__HIDE__"},
 					{url: "aidisk.asp", tabName: "__INHERIT__"},
@@ -129,11 +129,11 @@ define(function(){
 					{url: "Advanced_TimeMachine.asp", tabName: "__INHERIT__"},
 					{url: "fileflex.asp", tabName: "__INHERIT__"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#AiCloud_Title#>",
-				index: "menu_AiCloud", 
+				index: "menu_AiCloud",
 				tab: [
 					{url: "cloud_main.asp", tabName: "AiCloud 2.0"},
 					{url: "cloud_sync.asp", tabName: "<#smart_sync#>"},
@@ -141,14 +141,15 @@ define(function(){
 					{url: "cloud_settings.asp", tabName: "<#Settings#>"},
 					{url: "cloud_syslog.asp", tabName: "<#Log#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "Tools",
 				index: "menu_Tools",
 				tab: [
-					{url: "Tools_Sysinfo.asp", tabName: "Sysinfo"},
-					{url: "Tools_OtherSettings.asp", tabName: "Other Settings"},
+					{url: "Tools_Sysinfo.asp", tabName: "<#Sysinfo#>"},
+					{url: "Tools_OtherSettings.asp", tabName: "<#Other_Settings#>"},
+					{url: "Tools_K3Screen.asp", tabName: "<#K3Screen#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
 				]
 			},
@@ -158,7 +159,7 @@ define(function(){
 				index: "menu_Split",
 				tab: [
 					{url: "NULL", tabName: "__HIDE__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu5_1#>",
@@ -174,7 +175,7 @@ define(function(){
 					{url: "Advanced_Roaming_Block_Content.asp", tabName: "<#WiFi_Roaming_Block_List#>"},
 					{url: "Advanced_Wireless_Survey.asp", tabName: "Site Survey"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu5_2#>",
@@ -188,7 +189,7 @@ define(function(){
 					{url: "Advanced_IPTV_Content.asp", tabName: "IPTV"},
 					{url: "Advanced_SwitchCtrl_Content.asp", tabName: "<#Switch_itemname#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu5_3#>",
@@ -218,7 +219,7 @@ define(function(){
 			},
 			{
 				menuName: "VPN",
-				index: "menu_VPN", 
+				index: "menu_VPN",
 				tab: [
 					{url: "Advanced_VPNStatus.asp", tabName: "VPN Status"},
 					{url: "Advanced_VPN_OpenVPN.asp", tabName: "<#BOP_isp_heart_item#>"},
@@ -230,7 +231,7 @@ define(function(){
 					{url: "Advanced_Instant_Guard.asp", tabName: "Instant Guard"},/*untranslated*/
 					{url: "NULL", tabName: "__INHERIT__"}
 				]
-			},		
+			},
 			{
 				menuName: "<#menu5_5#>",
 				index: "menu_Firewall",
@@ -238,7 +239,7 @@ define(function(){
 					{url: "Advanced_BasicFirewall_Content.asp", tabName: "<#menu5_1_1#>"},
 					{url: "Advanced_URLFilter_Content.asp", tabName: "<#menu5_5_2#>"},
 					{url: "Advanced_KeywordFilter_Content.asp", tabName: "<#menu5_5_5#>"},
-					{url: "Advanced_Firewall_Content.asp", tabName: "<#menu5_5_4#>"},			
+					{url: "Advanced_Firewall_Content.asp", tabName: "<#menu5_5_4#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
 				]
 			},
@@ -335,7 +336,7 @@ define(function(){
 				if(!networkTool_support){
 					retArray.push("menu_NekworkTool");
 				}
-				
+
 				if(!pptpd_support && !openvpnd_support && !vpnc_support){
 					retArray.push("menu_VPN");
 				}
@@ -450,25 +451,25 @@ define(function(){
 				}
 
 				if(!traffic_analyzer_support){
-					retArray.push("TrafficAnalyzer_Statistic.asp");		
+					retArray.push("TrafficAnalyzer_Statistic.asp");
 				}
 
 				if(!traffic_limiter_support){
-					retArray.push("AdaptiveQoS_TrafficLimiter.asp");		
+					retArray.push("AdaptiveQoS_TrafficLimiter.asp");
 				}
 
 				if(downsize_4m_support){
 					retArray.push("Main_ConnStatus_Content.asp");
 					retArray.push("Main_TrafficMonitor_realtime.asp");
 				}
-				
+
 				if(!pptpd_support){
 					retArray.push("Advanced_VPN_PPTP.asp");
 				}
 
 				if(!openvpnd_support){
 					retArray.push("Advanced_VPN_OpenVPN.asp");
-				}	
+				}
 
 				if(!ipsec_srv_support){
 					retArray.push("Advanced_VPN_IPSec.asp");
@@ -497,7 +498,7 @@ define(function(){
 				if(noftp_support){
 					retArray.push("Advanced_AiDisk_ftp.asp");
 				}
-				
+
 				if(!dualWAN_support){
 					retArray.push("Advanced_WANPort_Content.asp");
 					retArray.push("Advanced_Modem_Content.asp");
@@ -518,7 +519,7 @@ define(function(){
 				}
 
 				if(!SwitchCtrl_support){
-					retArray.push("Advanced_SwitchCtrl_Content.asp");		
+					retArray.push("Advanced_SwitchCtrl_Content.asp");
 				}
 
 				if(!tr069_support){
@@ -536,7 +537,7 @@ define(function(){
 				if(!smart_connect_support || Qcawifi_support){
 					retArray.push("Advanced_Smart_Connect.asp");
 				}
-				
+
 				if(!adBlock_support){
 					retArray.push("AiProtection_AdBlock.asp");
 				}
@@ -556,13 +557,13 @@ define(function(){
 				}
 				else{
 					retArray.push("Advanced_WAN_Content.asp");
-					retArray.push("Advanced_OperationMode_Content.asp");			
+					retArray.push("Advanced_OperationMode_Content.asp");
 					if(!spectrum_support)
 						retArray.push("Main_Spectrum_Content.asp");
 				}
 
 				if(hwmodeSwitch_support){
-					retArray.push("Advanced_OperationMode_Content.asp");		
+					retArray.push("Advanced_OperationMode_Content.asp");
 				}
 
 				if(noiptv_support){
@@ -603,7 +604,7 @@ define(function(){
 				if(!wifiproxy_support || !concurrep_support || !isSwMode("re")){
 					retArray.push("Advanced_WProxy_Content.asp");
 				}
-				
+
 				if(!captivePortal_support) {
 					retArray.push("Captive_Portal.asp");
 					retArray.push("Captive_Portal_Advanced.asp");
@@ -675,7 +676,7 @@ define(function(){
 				}
 				else if(isSwMode("ap")){
 					retArray.push("GameBoost.asp");
-					retArray.push("TrafficAnalyzer_Statistic.asp");	
+					retArray.push("TrafficAnalyzer_Statistic.asp");
 					if(!dhcp_override_support){
 						retArray.push("Advanced_DHCP_Content.asp");
 					}
diff --git a/release/src/router/www/require/modules/menuTree.js b/release/src/router/www/require/modules/menuTree.js
index e61c5cd887..a9d94d29d0 100644
--- a/release/src/router/www/require/modules/menuTree.js
+++ b/release/src/router/www/require/modules/menuTree.js
@@ -8,9 +8,9 @@ define(function(){
 				index: "Assign an index to this menu, it is also used for filtering",
 				tab: [
 					{
-						url: "Put url here", 
+						url: "Put url here",
 						tabName: "
-								Assign a title for this tab, leave this field empty to bypass this tab, 
+								Assign a title for this tab, leave this field empty to bypass this tab,
 								fill in '__HIDE__' to hide the tab switcher,
 								fill in '__INHERIT__' to inhert tab index from referred page.
 						"
@@ -20,19 +20,19 @@ define(function(){
 			*/
 			{
 				menuName: "<#QIS#>",
-				index: "menu_QIS", 
+				index: "menu_QIS",
 				tab: [
 					{url: "QIS_wizard.htm", tabName: "__HIDE__"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			/* ============================================================================================================ */
 			{
 				menuName: "<#menu5_1_1#>",
-				index: "menu_Split", 
+				index: "menu_Split",
 				tab: [
 					{url: "NULL", tabName: "__HIDE__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu1#>",
@@ -41,7 +41,7 @@ define(function(){
 					{url: "<% networkmap_page(); %>", tabName: "__HIDE__"},
 					{url: "NULL", tabName: "__INHERIT__"}
 				]
-			}, 
+			},
 			{
 				menuName: "AiMesh",
 				index: "menu_AiMesh", 
@@ -63,7 +63,7 @@ define(function(){
 			},
 			{
 				menuName: "<#AiProtection_title#>",
-				index: "menu_AiProtection", 
+				index: "menu_AiProtection",
 				tab: [
 					{url: "AiProtection_HomeSecurity.asp", tabName: "__HIDE__"},
 					{url: "AiProtection_HomeProtection.asp", tabName: "<#AiProtection_Home#>"},
@@ -76,51 +76,51 @@ define(function(){
 					{url: "AiProtection_Key_Guard.asp", tabName: "Key Guard"},
 					{url: "YandexDNS.asp", tabName: "<#YandexDNS#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{		//for without bwdpi model, RT-N66U_C1
 				menuName: "<#Menu_TrafficManager#>",
-				index: "menu_QoS", 
+				index: "menu_QoS",
 				tab: [
 					{url: "QoS_EZQoS.asp", tabName: "<#menu5_3_2#>"},
 					{url: "Main_TrafficMonitor_realtime.asp", tabName: "<#traffic_monitor#>"},
 					{url: "Main_TrafficMonitor_last24.asp", tabName: "__INHERIT__"},
 					{url: "Main_TrafficMonitor_daily.asp", tabName: "__INHERIT__"},
-					{url: "AdaptiveQoS_ROG.asp", tabName: "<table style='margin-top:-7px;'><tr><td><img src='/images/ROG_Logo.png' style='border:0px;width:32px;'></td><td>ROG First</td></tr></table>"}, 
+					{url: "AdaptiveQoS_ROG.asp", tabName: "<table style='margin-top:-7px;'><tr><td><img src='/images/ROG_Logo.png' style='border:0px;width:32px;'></td><td>ROG First</td></tr></table>"},
 					{url: "Main_Spectrum_Content.asp", tabName: "<#Spectrum_title#>"},
 					{url: "AdaptiveQoS_TrafficLimiter.asp", tabName: "Traffic Limiter"},
 					{url: "Advanced_QOSUserPrio_Content.asp", tabName: "__INHERIT__"},
 					{url: "Advanced_QOSUserRules_Content.asp", tabName: "__INHERIT__"},
-				] 
+				]
 			},
 			{		//for without bwdpi model, RT-N66U_C1
 				menuName: "<#Parental_Control#>",
-				index: "menu_ParentalControl", 
+				index: "menu_ParentalControl",
 				tab: [
 					{url: "ParentalControl.asp", tabName: "<#Parental_Control#>"},
 					{url: "YandexDNS.asp", tabName: "<#YandexDNS#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#Adaptive_QoS#>",
-				index: "menu_BandwidthMonitor", 
+				index: "menu_BandwidthMonitor",
 				tab: [
 					{url: "AdaptiveQoS_Bandwidth_Monitor.asp", tabName: "<#Bandwidth_monitor#>"},
 					{url: "QoS_EZQoS.asp", tabName: "<#menu5_3_2#>"},
 					{url: "QoS_Stats.asp", tabName: "QoS Statistics"},
 					{url: "AdaptiveQoS_WebHistory.asp", tabName: "<#Adaptive_History#>"},
-					{url: "AdaptiveQoS_ROG.asp", tabName: "<table style='margin-top:-7px;'><tr><td><img src='/images/ROG_Logo.png' style='border:0px;width:32px;'></td><td>ROG First</td></tr></table>"}, 
+					{url: "AdaptiveQoS_ROG.asp", tabName: "<table style='margin-top:-7px;'><tr><td><img src='/images/ROG_Logo.png' style='border:0px;width:32px;'></td><td>ROG First</td></tr></table>"},
 					{url: "Main_Spectrum_Content.asp", tabName: "<#Spectrum_title#>"},
 					{url: "Advanced_QOSUserPrio_Content.asp", tabName: "__INHERIT__"},
 					{url: "Advanced_QOSUserRules_Content.asp", tabName: "__INHERIT__"},
 					{url: "AdaptiveQoS_Adaptive.asp", tabName: "__INHERIT__"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#Traffic_Analyzer#>",
-				index: "menu_TrafficAnalyzer", 
+				index: "menu_TrafficAnalyzer",
 				tab: [
 					{url: "TrafficAnalyzer_Statistic.asp", tabName: "<#Statistic#>"},
 					{url: "Main_TrafficMonitor_realtime.asp", tabName: "<#traffic_monitor#>"},
@@ -132,19 +132,19 @@ define(function(){
 					{url: "Main_TrafficMonitor_devmonthly.asp", tabName: "__INHERIT__"},
 					{url: "AdaptiveQoS_TrafficLimiter.asp", tabName: "Traffic Limiter"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#Game_Boost#>",
-				index: "menu_GameBoost", 
+				index: "menu_GameBoost",
 				tab: [
 					{url: "GameBoost.asp", tabName: "<#Game_Boost#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#Menu_usb_application#>",
-				index: "menu_APP", 
+				index: "menu_APP",
 				tab: [
 					{url: "APP_Installation.asp", tabName: "__HIDE__"},
 					{url: "aidisk.asp", tabName: "__INHERIT__"},
@@ -157,11 +157,11 @@ define(function(){
 					{url: "Advanced_TimeMachine.asp", tabName: "__INHERIT__"},
 					{url: "fileflex.asp", tabName: "__INHERIT__"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#AiCloud_Title#>",
-				index: "menu_AiCloud", 
+				index: "menu_AiCloud",
 				tab: [
 					{url: "cloud_main.asp", tabName: "AiCloud 2.0"},
 					{url: "cloud_sync.asp", tabName: "<#smart_sync#>"},
@@ -169,16 +169,17 @@ define(function(){
 					{url: "cloud_settings.asp", tabName: "<#Settings#>"},
 					{url: "cloud_syslog.asp", tabName: "<#Log#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "Tools",
 				index: "menu_Tools",
 				tab: [
-					{url: "Tools_Sysinfo.asp", tabName: "Sysinfo"},
-					{url: "Tools_OtherSettings.asp", tabName: "Other Settings"},
+					{url: "Tools_Sysinfo.asp", tabName: "<#Sysinfo#>"},
+					{url: "Tools_OtherSettings.asp", tabName: "<#Other_Settings#>"},
+					{url: "Tools_K3Screen.asp", tabName: "<#K3Screen#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			/* ============================================================================================================ */
 			{
@@ -186,7 +187,7 @@ define(function(){
 				index: "menu_Split",
 				tab: [
 					{url: "NULL", tabName: "__HIDE__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu5_1#>",
@@ -202,7 +203,7 @@ define(function(){
 					{url: "Advanced_Roaming_Block_Content.asp", tabName: "<#WiFi_Roaming_Block_List#>"},
 					{url: "Advanced_Wireless_Survey.asp", tabName: "Site Survey"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu5_2#>",
@@ -216,7 +217,7 @@ define(function(){
 					{url: "Advanced_IPTV_Content.asp", tabName: "IPTV"},
 					{url: "Advanced_SwitchCtrl_Content.asp", tabName: "<#Switch_itemname#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
-				] 
+				]
 			},
 			{
 				menuName: "<#menu5_3#>",
@@ -256,7 +257,7 @@ define(function(){
 			},
 			{
 				menuName: "VPN",
-				index: "menu_VPN", 
+				index: "menu_VPN",
 				tab: [
 					{url: "Advanced_VPNStatus.asp", tabName: "VPN Status"},
 					{url: "Advanced_VPN_OpenVPN.asp", tabName: "<#BOP_isp_heart_item#>"},
@@ -268,7 +269,7 @@ define(function(){
 					{url: "Advanced_Instant_Guard.asp", tabName: "Instant Guard"},/*untranslated*/
 					{url: "NULL", tabName: "__INHERIT__"}
 				]
-			},		
+			},
 			{
 				menuName: "<#menu5_5#>",
 				index: "menu_Firewall",
@@ -276,7 +277,7 @@ define(function(){
 					{url: "Advanced_BasicFirewall_Content.asp", tabName: "<#menu5_1_1#>"},
 					{url: "Advanced_URLFilter_Content.asp", tabName: "<#menu5_5_2#>"},
 					{url: "Advanced_KeywordFilter_Content.asp", tabName: "<#menu5_5_5#>"},
-					{url: "Advanced_Firewall_Content.asp", tabName: "<#menu5_5_4#>"},		
+					{url: "Advanced_Firewall_Content.asp", tabName: "<#menu5_5_4#>"},
 					{url: "NULL", tabName: "__INHERIT__"}
 				]
 			},
@@ -373,7 +374,7 @@ define(function(){
 				if(!networkTool_support){
 					retArray.push("menu_NekworkTool");
 				}
-				
+
 				if(!pptpd_support && !openvpnd_support && !vpnc_support){
 					retArray.push("menu_VPN");
 				}
@@ -489,30 +490,30 @@ define(function(){
 				}
 
 				if(!traffic_analyzer_support){
-					retArray.push("TrafficAnalyzer_Statistic.asp");		
+					retArray.push("TrafficAnalyzer_Statistic.asp");
 				}
 
 				if(!traffic_limiter_support){
-					retArray.push("AdaptiveQoS_TrafficLimiter.asp");		
+					retArray.push("AdaptiveQoS_TrafficLimiter.asp");
 				}
 
 				if(downsize_4m_support){
 					retArray.push("Main_ConnStatus_Content.asp");
 					retArray.push("Main_TrafficMonitor_realtime.asp");
 				}
-				
+
 				if(!pptpd_support){
 					retArray.push("Advanced_VPN_PPTP.asp");
 				}
 
 				if(!openvpnd_support){
 					retArray.push("Advanced_VPN_OpenVPN.asp");
-				}	
+				}
 
 				if(!ipsec_srv_support){
 					retArray.push("Advanced_VPN_IPSec.asp");
 				}
-				
+
 				if(!vpnc_support){
 					retArray.push("Advanced_VPNClient_Content.asp");
 				}
@@ -536,7 +537,7 @@ define(function(){
 				if(noftp_support){
 					retArray.push("Advanced_AiDisk_ftp.asp");
 				}
-				
+
 				if(!dualWAN_support){
 					retArray.push("Advanced_WANPort_Content.asp");
 					retArray.push("Advanced_Modem_Content.asp");
@@ -557,7 +558,7 @@ define(function(){
 				}
 
 				if(!SwitchCtrl_support){
-					retArray.push("Advanced_SwitchCtrl_Content.asp");		
+					retArray.push("Advanced_SwitchCtrl_Content.asp");
 				}
 
 				if(!tr069_support){
@@ -575,7 +576,7 @@ define(function(){
 				if(!smart_connect_support){
 					retArray.push("Advanced_Smart_Connect.asp");
 				}
-				
+
 				if(!adBlock_support){
 					retArray.push("AiProtection_AdBlock.asp");
 				}
@@ -594,10 +595,10 @@ define(function(){
 					retArray.push("Main_AdslStatus_Content.asp");
 					retArray.push("Main_Spectrum_Content.asp");
 				}
-				else{					
+				else{
 					retArray.push("Advanced_WAN_Content.asp");
 					retArray.push("Advanced_VDSL_Content.asp");
-					retArray.push("Advanced_OperationMode_Content.asp");					
+					retArray.push("Advanced_OperationMode_Content.asp");
 					if(!spectrum_support)
 						retArray.push("Main_Spectrum_Content.asp");
 				}
@@ -649,7 +650,7 @@ define(function(){
 				if((!Rawifi_support && ! Rtkwifi_support) || !concurrep_support || !isSwMode("re")){
 					retArray.push("Advanced_WProxy_Content.asp");
 				}
-				
+
 				if(!captivePortal_support) {
 					retArray.push("Captive_Portal.asp");
 					retArray.push("Captive_Portal_Advanced.asp");
@@ -709,7 +710,7 @@ define(function(){
 				}
 				else if(isSwMode("ap")){
 					retArray.push("GameBoost.asp");
-					retArray.push("TrafficAnalyzer_Statistic.asp");	
+					retArray.push("TrafficAnalyzer_Statistic.asp");
 					if(!dhcp_override_support){
 						retArray.push("Advanced_DHCP_Content.asp");
 					}
-- 
2.25.1

